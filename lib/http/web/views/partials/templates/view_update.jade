section.wrapper#template_details(ng-init="getTemplate()")
  section.wrapper_centered
    h2.alert.alert-danger(ng-if='errorMessage') {{errorMessage}}
    h2.alert.alert-success(ng-if='successMessage') {{successMessage}}
    h1 Template: {{template.name}} {{template.paperMarginValue}}
    button.btn_turquoise(class="btn btn-info" ng-click="edit()" ng-if='!editable && !payloadOptions') edit
    button(class="btn btn-default" ng-click="openPayloadOptions()" ng-if='!editable && !payloadOptions') preview
    table.list.template-detail-list(ng-if='!editable && !payloadOptions')
      tr
        td Type:
        td {{template.type}}
      tr
        td Paper Format:
        td {{template.paperFormat}}
      tr
        td Margin:
        td {{template.paperMargin}}
      tr
        td Header Height:
        td {{template.headerHeight}}
      tr
        td Footer Height:
        td {{template.footerHeight}}
      tr
        td Body:
        td 
          pre {{template.body}}

    form.edit-payload-form(ng-if='payloadOptions')
      div.form-group(ng-class="{'error': validationErrors.paperFormat}")
        label.form-control-label Payload:
        textarea.form-control(type="text" rows="10" ng-model="payload")
      div.form-group
        input(type="submit" class="btn btn-success" ng-click="render(template, payload)" value="generate preview")
        input(type="submit" class="btn btn-danger" ng-click="reset()" value="cancel")
        
    form.edit-template-form(ng-if='editable')
      button.btn-success(class="btn btn-success" ng-click="update()") Save
      button(class="btn btn-danger" ng-click="reset()") Cancel
      table.list
        tr
          td Name:
          td 
            input(type="text" ng-model="template.name" )
            span.validation_error_message(ng-if='validationErrors.name') {{validationErrors.name[0]}}
        tr
          td Type:
          td 
            select(ng-model="template.type")
              option mustache
              option html
            span.validation_error_message(ng-if='validationErrors.type') {{validationErrors.type[0]}}
        tr
          td Paper Format:
          td 
            select(ng-model="template.paperFormat" )
              option A5
              option A4
              option A3
        tr
          td Paper Margin:
          td
            div.inline-inputs
              input(type="number" ng-model="template.paperMarginValue" )
              select(ng-model="template.paperMarginUnit" )
                option px
                option cm
            span.validation_error_message(ng-if='validationErrors.paperMargin') {{validationErrors.paperMargin[0]}}
        tr
          td Header Height:
          td
            div.inline-inputs
              input(type="number" ng-model="template.headerHeightValue" )
              select(ng-model="template.headerHeightUnit" )
                option px
                option cm
            span.validation_error_message(ng-if='validationErrors.headerHeight') {{validationErrors.headerHeight[0]}}
        tr
          td Footer Height:
          td
            div.inline-inputs
              input(type="number" ng-model="template.footerHeightValue" )
              select(ng-model="template.footerHeightUnit" )
                  option px
                  option cm
            span.validation_error_message(ng-if='validationErrors.footerHeight') {{validationErrors.footerHeight[0]}}
        tr
          td Body:
          td
            textarea.form-control(type="text" rows="10" ng-model="template.body")
            span.validation_error_message(ng-if='validationErrors.body') {{validationErrors.body[0]}}
